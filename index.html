<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="ScreenOrientation" content="autoRotate:disabled">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- Ar.js for nft markers  -->
  <script
    src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>

  <!-- Aframe for a-frame components and end a frame extras for gesture detecting -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.1/dist/aframe-extras.min.js"></script>

  <!-- Gesture decting add to scene in order to work -->
  <script>

    AFRAME.registerComponent("gesture-detector", {
      schema: {
        element: { default: "" }
      },

      init: function () {
        this.targetElement =
          this.data.element && document.querySelector(this.data.element);

        if (!this.targetElement) {
          this.targetElement = this.el;
        }

        this.internalState = {
          previousState: null
        };

        this.emitGestureEvent = this.emitGestureEvent.bind(this);

        this.targetElement.addEventListener(
          "touchstart",
          this.emitGestureEvent
        );

        this.targetElement.addEventListener(
          "touchend",
          this.emitGestureEvent
        );

        this.targetElement.addEventListener(
          "touchmove",
          this.emitGestureEvent
        );
      },

      remove: function () {
        this.targetElement.removeEventListener(
          "touchstart",
          this.emitGestureEvent
        );

        this.targetElement.removeEventListener(
          "touchend",
          this.emitGestureEvent
        );

        this.targetElement.removeEventListener(
          "touchmove",
          this.emitGestureEvent
        );
      },

      emitGestureEvent(event) {
        const currentState = this.getTouchState(event);

        const previousState = this.internalState.previousState;

        const gestureContinues =
          previousState &&
          currentState &&
          currentState.touchCount == previousState.touchCount;

        const gestureEnded = previousState && !gestureContinues;

        const gestureStarted = currentState && !gestureContinues;

        if (gestureEnded) {
          const eventName =
            this.getEventPrefix(previousState.touchCount) + "fingerend";

          this.el.emit(eventName, previousState);

          this.internalState.previousState = null;
        }

        if (gestureStarted) {
          currentState.startTime = performance.now();

          currentState.startPosition = currentState.position;

          currentState.startSpread = currentState.spread;

          const eventName =
            this.getEventPrefix(currentState.touchCount) + "fingerstart";

          this.el.emit(eventName, currentState);

          this.internalState.previousState = currentState;
        }

        if (gestureContinues) {
          const eventDetail = {
            positionChange: {
              x: currentState.position.x - previousState.position.x,

              y: currentState.position.y - previousState.position.y
            }
          };

          if (currentState.spread) {
            eventDetail.spreadChange =
              currentState.spread - previousState.spread;
          }

          // Update state with new data

          Object.assign(previousState, currentState);

          // Add state data to event detail

          Object.assign(eventDetail, previousState);

          const eventName =
            this.getEventPrefix(currentState.touchCount) + "fingermove";

          this.el.emit(eventName, eventDetail);
        }
      },

      getTouchState: function (event) {
        if (event.touches.length === 0) {
          return null;
        }

        // Convert event.touches to an array so we can use reduce

        const touchList = [];

        for (let i = 0; i < event.touches.length; i++) {
          touchList.push(event.touches[i]);
        }

        const touchState = {
          touchCount: touchList.length
        };

        // Calculate center of all current touches

        const centerPositionRawX =
          touchList.reduce((sum, touch) => sum + touch.clientX, 0) /
          touchList.length;

        const centerPositionRawY =
          touchList.reduce((sum, touch) => sum + touch.clientY, 0) /
          touchList.length;

        touchState.positionRaw = {
          x: centerPositionRawX,
          y: centerPositionRawY
        };

        // Scale touch position and spread by average of window dimensions

        const screenScale = 2 / (window.innerWidth + window.innerHeight);

        touchState.position = {
          x: centerPositionRawX * screenScale,
          y: centerPositionRawY * screenScale
        };

        // Calculate average spread of touches from the center point

        if (touchList.length >= 2) {
          const spread =
            touchList.reduce((sum, touch) => {
              return (
                sum +
                Math.sqrt(
                  Math.pow(centerPositionRawX - touch.clientX, 2) +
                  Math.pow(centerPositionRawY - touch.clientY, 2)
                )
              );
            }, 0) / touchList.length;

          touchState.spread = spread * screenScale;
        }

        return touchState;
      },


      getEventPrefix(touchCount) {
        const numberNames = ["one", "two", "three", "many"];

        return numberNames[Math.min(touchCount, 4) - 1];
      }
    });
  </script>
  <!-- gesture handling to control 3d objects -->
  <script>
    AFRAME.registerComponent("gesture-handler", {
      schema: {
        enabled: { default: true },
        rotationFactor: { default: 2 },
        minScale: { default: 0.3 },
        maxScale: { default: 8 },
        positionFactor: { default: 10 },
        name: {
          dafault: "model"
        }
      },

      init: function () {
        this.handleScale = this.handleScale.bind(this);
        this.handleRotation = this.handleRotation.bind(this);
        this.handlePosition = this.handlePosition.bind(this);

        this.isVisible = false;
        this.initialScale = this.el.object3D.scale.clone();
        this.scaleFactor = 1;

        this.el.sceneEl.addEventListener("markerFound", e => {
          this.isVisible = true;
        });

        this.el.sceneEl.addEventListener("markerLost", e => {
          this.isVisible = false;
        });
      },
      update: function () {
        if (this.data.enabled) {
          this.el.sceneEl.addEventListener(
            "onefingermove",
            this.handleRotation
          );
          this.el.sceneEl.addEventListener(
            "onefingermove",
            this.handlePosition
          );
          this.el.sceneEl.addEventListener("twofingermove", this.handleScale);
        } else {
          this.el.sceneEl.removeEventListener(
            "onefingermove",
            this.handleRotation
          );
          this.el.sceneEl.removeEventListener(
            "onefingermove",
            this.handlePosition
          );
          this.el.sceneEl.removeEventListener(
            "twofingermove",
            this.handleScale
          );
        }
      },

      remove: function () {
        this.el.sceneEl.removeEventListener(
          "onefingermove",
          this.handleRotation
        );
        this.el.sceneEl.removeEventListener(
          "onefingermove",
          this.handlePosition
        );
        this.el.sceneEl.removeEventListener(
          "twofingermove",
          this.handleScale
        );
      },
      handleRotation: function (event) {
        if (this.isVisible) {

          this.el.object3D.rotation.y +=
            event.detail.positionChange.x * this.data.rotationFactor;
          this.el.object3D.rotation.x +=
            event.detail.positionChange.y * this.data.rotationFactor;
          // if (this.el.object3D.rotation.x > 0 && this.el.object3D < 90 && this.data.name === "model") {
          //   this.el.object3D.rotation.x +=
          //     event.detail.positionChange.y * this.data.rotationFactor;
          // } else if (this.el.object3D.rotation.x > -90 && this.el.object3D < 0 && this.data.name === "plane") {
          //   this.el.object3D.rotation.x +=
          //     event.detail.positionChange.y * this.data.rotationFactor;
          // } else if (this.data.name = "plane" && this.data.rotation < -90) {
          //   this.el.object3D.rotation.x = -90
          // } else if (this.data.name = "plane" && this.data.rotation > 0) {
          //   this.el.object3D.rotation.x = 0
          // } else if (this.data.name = "model" && this.data.rotation < 0) {
          //   this.el.object3D.rotation.x = 0
          // } else if (this.data.name = "model" && this.data.rotation > 90) {
          //   this.el.object3D.rotation.x = 90
          // }
        }
      },
      handlePosition: function (event) {
        if (false) {
          this.el.object3D.position.y +=
            event.detail.positionChange.y * this.data.positionFactor;
          this.el.object3D.position.x +=
            event.detail.positionChange.x * this.data.positionFactor;
        }
      },

      handleScale: function (event) {
        if (this.isVisible) {
          this.scaleFactor *=
            1 + event.detail.spreadChange / event.detail.startSpread;

          this.scaleFactor = Math.min(
            Math.max(this.scaleFactor, this.data.minScale),
            this.data.maxScale
          );

          this.el.object3D.scale.x = this.scaleFactor * this.initialScale.x;
          this.el.object3D.scale.y = this.scaleFactor * this.initialScale.y;
          this.el.object3D.scale.z = this.scaleFactor * this.initialScale.z;
        }
      }
    });
  </script>

  <!-- Activate imageslider with dynamic properties -->
  <script>
    var slides = ["#my-image", "#my-image2", "#my-image3", "#my-image4", "#my-image5"];
    const slides2 = ["#dreizehn--1", "#dreizehn--2", "#dreizehn--3", "#dreizehn--4", "#dreizehn--5"]
    const slides8 = ["#achtzehn--1", "#achtzehn--2", "#achtzehn--3", "#achtzehn--4", "#achtzehn--5", "#achtzehn--6"]
    const slides5 = ['#fünf--1', '#fünf--2', '#fünf--3', '#fünf--4', '#fünf--5']
    const slides3 = ["#zehn--1", "#zehn--2", "#zehn--3", "#zehn--4", "#zehn--5"]
    const slides4 = ["#vier--1", "#vier--2", "#vier--3", "#vier--4"]
    let disableZoom = document.createElement("meta")
    disableZoom.setAttribute("name", "viewport")
    disableZoom.setAttribute("content", "width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no")
    AFRAME.registerComponent("image-slider-activate", {
      schema: {
        enabled: { default: true },
        images: {
          default: [{ img: '#my-image5', width: 120, height: 80, headline: 'peace' }, { img: '#my-image3', width: 120, height: 80, headline: 'was geht' }]
        },
        slides: {
          default: "slides2"
        },
        markerId: { default: "yo" }
      },

      init: function () {

        this.index = 0;
        this.isVisible = false;
        let dataSlides = this.data.slides;

        let images = this.data.images;
        slider.setAttribute("src", slides[0])
        let img__index = slides.indexOf(slider.getAttribute("src"));
        let markerId = this.data.markerId;
        let widthDim = parseInt(images[img__index * 4 + 1].toString().substring(6, 11)) ?? 120

        let camera = document.querySelector("[camera]");
        let heightDim = parseInt(images[img__index * 4 + 2].toString().substring(7, 12)) ?? 100

        let buttons = document.getElementById("buttons");
        let element = document.getElementById("image-slider");
        let marker = document.getElementById(markerId);
        let img__text = document.getElementById("img__text")





        const click__event = new MouseEvent("click", { view: window, bubbles: true, cancelable: true });

        marker.addEventListener("markerFound", e => {

          this.isVisible = true;

          buttons.classList.remove("hidden");
          // inc__button.dispatchEvent(click__event)
          let cameraPosition = camera.object3D.position;
          let markerPosition = marker.object3D.position;
          document.querySelector("head").appendChild(disableZoom)
          switch (dataSlides) {
            case "slides2":
              slides = slides2
              break;
            case "slides3":
              slides = slides3
              break;
            case "slides8":
              slides = slides8
              break;
            case "slides5":
              slides = slides5
              break;
            case "slides4":
              slides = slides4
              break;
            default:
              slides = ["#my-image", "#my-image2", "#my-image3", "#my-image4", "#my-image5"];
              break;
          }
          next__button.dispatchEvent(click__event);

          setInterval(() => {


            if (this.isVisible) {
              let distance = cameraPosition.distanceTo(markerPosition);
              element.setAttribute('visible', true);
              img__index = slides.indexOf(slider.getAttribute("src"));
              img__text.innerHTML = images[img__index * 4 + 3].toString().substring(9, 25).replace("}", "").replace("]", "").replace("'", "").replace("'", "")

              widthDim = parseInt(images[img__index * 4 + 1].toString().substring(6, 11))
              heightDim = parseInt(images[img__index * 4 + 2].toString().substring(7, 12))
              let slide__height = (heightDim / distance);
              let slide__width = (widthDim / distance);
              // limit size
              if (slide__width * 895 < (window.screen.width - 30) && slide__width * 895 > (window.screen.width / 2.5)) {
                element.setAttribute("width", slide__width.toString());
                element.setAttribute("height", slide__height.toString());
                buttons.style = `width: ${slide__width * 895}px; height: ${slide__height * 885}px;}`
              }

            } else {
              // setAttribute('visible', false); might better


              element.setAttribute('visible', false);

            }
            //maye experiment with interval number
            //should update faster but 
          }, 20)

        });

        marker.addEventListener("markerLost", e => {
          this.isVisible = false;

          buttons.classList.add("hidden");
          document.querySelector("head").removeChild(disableZoom)

          element.setAttribute('visible', false);
        });
      },
      tick: function (time, deltaTime) {

      }
    });


    AFRAME.registerComponent('objectmodel-detected', {
      schema: {

      },
      init: function () {
        this.isVisible = false;
        let model = document.getElementById("area")
        let plane = document.getElementById("plane")
        let modelMarker = document.getElementById("modelmarker")

        modelMarker.addEventListener("markerFound", e => {
          this.isVisible = true;

          model.setAttribute('visible', true);
          plane.setAttribute('visible', true);


        })

        modelMarker.addEventListener("markerLost", e => {
          this.isVisible = false;
          model.setAttribute('visible', false);
          plane.setAttribute('visible', false);
        })
      },
      tick: function (time, deltaTime) {

      }
    })

    //KAI
    //der funktioniert
    AFRAME.registerComponent('videohandler', {
      init: function () {
        let markerVid = document.querySelector("#vidMarker")
        let camera = document.querySelector("[camera]");
        this.isVisible = false
        this.vid = document.querySelector("#video");

        markerVid.addEventListener('markerFound', function () {
          this.isVisible = true
          let cameraPosition = camera.object3D.position;
          let markerPosition = markerVid.object3D.position;
          document.querySelector("head").appendChild(disableZoom)
          this.vid.classList.remove("hidden")
          this.vid.play();
          setInterval(() => {

            if (this.isVisible) {
              let distance = cameraPosition.distanceTo(markerPosition);





              let vid__width = (80000 * 2 / distance);


              Math.floor(vid__width)
              this.vid.style.width = `${vid__width}px`




            } else {
              // setAttribute('visible', false); might better


              this.vid.classList.add("hidden")

            }
            //maye experiment with interval number
            //should update faster but
          }, 20)
        }.bind(this));

        markerVid.addEventListener('markerLost', function () {
          this.isVisible = false
          this.vid.classList.add("hidden")
          this.vid.pause();
          this.vid.currentTime = 0;
          document.querySelector("head").removeChild(disableZoom)
        }.bind(this));
      }
    });

    //KAI
    //der funktioniert nicht
    AFRAME.registerComponent('videoFullhandler', {
      init: function () {
        let markerFullVid = document.querySelector("#vidFullMarker")

        this.isVisible = false
        this.vidFull = document.querySelector("#videoFull");

        markerFullVid.addEventListener('markerFound', function () {

          this.isVisible = true


          this.vidFull.classList.remove("hidden")
          this.vidFull.play();

        }.bind(this));

        markerFullVid.addEventListener('markerLost', function () {
          this.isVisible = false
          this.vidFull.classList.add("hidden")
          this.vidFull.pause();
          this.vidFull.currentTime = 0;

        }.bind(this));
      }
    });

    //KAI
    //der funktioniert nicht
    AFRAME.registerComponent('fullVideo', {
      init: function () {
        let markerFullVidTwo = document.querySelector("#fullVideoMarker")

        this.isVisible = false
        let videoFullLet = document.querySelector("#videoFullTwo");

        markerFullVidTwo.addEventListener('markerFound', function () {

          this.isVisible = true


          videoFullLet.classList.remove("hidden")
          videoFullLet.play();

        });

        markerFullVidTwo.addEventListener('markerLost', function () {
          this.isVisible = false
          videoFullLet.classList.add("hidden")
          vid.eovideoFullLetpause();
          videoFullLet.currentTime = 0;

        });
      }
    });


       // AFRAME.registerComponent('ImageSilderHtml', {
    //   init: function () {
    //     let markerImageSlider = document.querySelector("#imageSliderMarker")

    //     this.isVisible = false
    //     this.imageSlider = document.querySelector("#imageSliderHtml");

    //     markerImageSlider.addEventListener('markerFound', function () {

    //       this.isVisible = true



    //     }.bind(this));

    //     markerImageSlider.addEventListener('markerLost', function () {
    //       this.isVisible = false


    //     }.bind(this));
    //   }
    // });

  </script>

  <style>
    body,
    html {
      height: 100%;
      margin: 0;
      padding: 0;
      pointer-events: none;
    }

    /* @media only screen and (orientation:landscape) {
      .rotateDevice {
        display: flex;
        justify-content: center;
        align-content: center;
      }

      .wrap {
        display: none;

      }
    }

    @media only screen and (orientation:portrait) {
      .rotateDevice {
        display: none;

      }

      .wrap {
        display: block;
      }
    } */

    div.wrap {
      height: 100%;
      overflow: hidden;
    }

    .arjs-loader {
      height: 100vh;
      width: 100vw;
      position: absolute;
      top: 0;
      left: 0;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: "black";
    }

    .arjs-loader div {
      text-align: center;
      font-size: 2em;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
    }


    .center {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .video {
      border-left-width: 15px;
      border-right-width: 15px;
      border-bottom-width: 40px;
      border-top-width: 15px;
      border-color: white;
      border-style: solid;
    }

    .fullVideo {
      width: 100%;

    }

    .fullVideoTwo {
      width: 100px;
      height: 100px;
    }

    .buttons {
      z-index: 10;
      border-left-width: 15px;
      border-right-width: 15px;
      border-bottom-width: 40px;
      border-top-width: 15px;
      border-color: white;
      border-style: solid;
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      position: relative;
      bottom: 5.5%;
      left: 2.05%;
      pointer-events: none;
    }


    .say-hi-button {
      padding: 0.25em;
      border-radius: 4px;
      border: none;
      background: none;
      color: black;
      width: 50px;
      height: 30px;
      position: relative;
      top: 35px;
      pointer-events: all;
    }

    .say-bye-button {
      padding: 0.25em;
      border-radius: 4px;
      border: none;
      background: none;
      color: black;
      width: 50px;
      height: 30px;
      position: relative;
      top: 35px;
      pointer-events: all;
    }



    .hidden {
      display: none;
      pointer-events: none;
    }

    .hidden button {
      display: none;
      pointer-events: none;
    }

    .img__text {
      position: relative;
      top: 40px;
    }

    .hidden p {
      display: none;
      pointer-events: none;
    }

    .a-dialog-allow-button {
      background-color: lightgreen;
      pointer-events: all;
    }

    .a-dialog-deny-button {
      background-color: powderblue;
      pointer-events: all;
    }

    .a-dialog-ok-button {
      background-color: lightgreen;
      pointer-events: all;
    }

    /* 
    Maybe overlaying scenes like that
    a-scene {
      width: 100%;
      height: 90%;
    } */
  </style>
</head>

<body style="margin : 0px; overflow: hidden;" id="body">

  <div class="wrap">


    <div class="arjs-loader">
      <div>
        <p>Ihre AR Erfahrung wird vorbereitet...</p>
      </div>
    </div>
    <div class="center">
      <!-- KAI
    der funktioniert nicht -->
      <video
        src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fproduction%20ID_5183199.mp4?v=1625124596008"
        preload="auto" id="videoFullTwo" response-type="arraybuffer" loop crossorigin webkit-playsinline autoplay muted
        playsinline class="fullVideoTwo hidden">
      </video>
    </div>
    <div class="center">
      <!-- KAI
    der funktioniert -->
      <video
        src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fproduction%20ID_5183199.mp4?v=1625124596008"
        preload="auto" id="video" response-type="arraybuffer" loop crossorigin webkit-playsinline autoplay muted
        playsinline class="video hidden">
      </video>
      <!-- KAI
    der funktioniert nicht -->
      <video
        src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fproduction%20ID_5183199.mp4?v=1625124596008"
        preload="auto" id="videoFull" response-type="arraybuffer" loop crossorigin webkit-playsinline autoplay muted
        playsinline class="fullVideo hidden">
      </video>
      <div class="buttons hidden" id="buttons">
        <button class="say-hi-button " id="btn__lastimage">

          <svg version="1.1" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px" y="0px" viewBox="0 0 57.8 25.4" style="enable-background:new 0 0 57.8 25.4;" xml:space="preserve">
            <path d="M0.4,11.8L0.4,11.8c0-0.1,0-0.1,0.1-0.2c0-0.1,0.1-0.1,0.1-0.1L13.8,0.3c0.6-0.5,1.6-0.4,2.1,0.2s0.4,1.6-0.2,2.1L5.6,11.2
	h50.7c0.8,0,1.5,0.7,1.5,1.5s-0.7,1.5-1.5,1.5H5.6l10.1,8.6c0.7,0.5,0.7,1.5,0.2,2.1c-0.3,0.3-0.7,0.5-1.1,0.5s-0.7-0.1-1-0.3
	L0.4,13.8l0,0c0-0.1-0.1-0.1-0.1-0.2l0,0C0.1,13.4,0,13,0,12.7C0,12.4,0.1,12.1,0.4,11.8z" />
          </svg>

        </button>
        <p class="img__text" id="img__text">yo</p>
        <button class="say-bye-button " id="btn__nextimage">
          <svg version="1.1" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px" y="0px" viewBox="0 0 57.8 25.4" style="enable-background:new 0 0 57.8 25.4;" xml:space="preserve">
            <path d="M57.8,12.7c0,0.3-0.1,0.7-0.3,0.9c0,0,0,0,0,0c0,0.1-0.1,0.1-0.1,0.2c0,0,0,0,0,0L44,25.1c-0.3,0.2-0.6,0.3-1,0.3
         c-0.4,0-0.8-0.2-1.1-0.5c-0.5-0.6-0.5-1.6,0.2-2.1l10.1-8.6H1.5c-0.8,0-1.5-0.7-1.5-1.5c0-0.8,0.7-1.5,1.5-1.5h50.7L42.1,2.6
         c-0.6-0.5-0.7-1.5-0.2-2.1c0.5-0.6,1.5-0.7,2.1-0.2l13.2,11.2c0,0,0.1,0,0.1,0.1c0.1,0.1,0.1,0.1,0.1,0.2c0,0,0,0,0,0
         C57.7,12.1,57.8,12.4,57.8,12.7z" />
          </svg>
        </button>
      </div>
    </div>


    <!-- a-frame scene -->
    <a-scene vr-mode-ui="enabled: false;"
      renderer="logarithmicDepthBuffer: true; antialias: true; alpha: true; precision: mediump;" embedded
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; sourceWidth:640; sourceHeight:480; displayWidth: 640; displayHeight: 480;"
      loading-screen="dotsColor: red; backgroundColor: black" gesture-detector id="scene" stats>
      <a-assets>
        <img id="my-image"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fmery.jpg?v=1619597239473" />
        <img id="my-image2"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fme.jpg?v=1619597297120" />
        <img id="my-image3"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2FSlide_1.jpg?v=1619598198727" />
        <img id="my-image4"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2FSlide_2.jpg?v=1619598223588" />
        <img id="my-image5"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fimage--010.jpg?v=1621338004993" />
        <img id="vier--1"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fvier_1.jpg?v=1624190913370" />
        <img id="vier--2"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fvier_2.jpg?v=1624190764823" />
        <img id="vier--3"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fvier_3.jpg?v=1624190764000" />
        <img id="vier--4"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fvier_4.jpg?v=1624190764604" />
        <img id="dreizehn--1"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fdreizehn_.1jpg.jpg?v=1624191646934" />
        <img id="dreizehn--2"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fdreizehn_2.jpg?v=1624191646811" />
        <img id="dreizehn--3"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fdreizehn_3.jpg?v=1624191647306" />
        <img id="dreizehn--4"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fdreizehn_4.jpg?v=1624191647325" />
        <img id="dreizehn--5"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fdreizehn_5.jpg?v=1624191647259" />
        <img id="zehn--1"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fzehn_1.jpg?v=1624191905429" />
        <img id="zehn--2"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fzehn_2.jpg?v=1624191903402" />
        <img id="zehn--3"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fzehn_3.jpg?v=1624191903943" />
        <img id="zehn--4"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fzehn_4.jpg?v=1624191904505" />
        <img id="zehn--5"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fzehn_5.jpg?v=1624191905402" />
        <img id="achtzehn--1"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fachtzehn_1.jpg?v=1624192189503" />
        <img id="achtzehn--2"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fachtzehn_2.jpg?v=1624192190774" />
        <img id="achtzehn--3"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fachtzehn_3.jpg?v=1624192190697" />
        <img id="achtzehn--4"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fachtzehn_4.jpg?v=1624192191123" />
        <img id="achtzehn--5"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fachtzehn_5.jpg?v=1624192190953" />
        <img id="achtzehn--6"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fachtzehn_6.jpg?v=1624192190564" />
        <img id="fünf--1"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Ffu%CC%88nf_.jpg?v=1624192511300" />
        <img id="fünf--2"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Ffu%CC%88nf_2.jpg?v=1624192512943" />
        <img id="fünf--3"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Ffu%CC%88nf_3.jpg?v=1624192513160" />
        <img id="fünf--4"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Ffu%CC%88nf_4.jpg?v=1624192513145" />
        <img id="fünf--5"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Ffu%CC%88nf_5.jpg?v=1624192513558" />

        <a-asset-item id="area3" response-type="arraybuffer"
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2FTCB_Textures.glb?v=1622546313299">
        </a-asset-item>



        <!-- <video
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2FWE-Header-Animation.mp4?v=1624955890694"
          preload="auto" id="vid" response-type="arraybuffer" loop crossorigin webkit-playsinline autoplay muted
          playsinline>
        </video> -->


        <!-- <video
          src="https://cdn.glitch.com/280b4493-9a96-4882-ace7-2c7060cc4d01%2Fproduction%20ID_5183199.mp4?v=1625124596008"
          preload="auto" id="vid" response-type="arraybuffer" loop crossorigin webkit-playsinline autoplay muted
          playsinline>
        </video> -->
      </a-assets>


      <!-- <a-nft type="nft" url="https://transfer.short-cuts.cloud/paular/tracker/vier/vier" id="vier__marker"
        emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
        <a-entity scale="1 1 1" position="50 150 -200" rotation="-90 0 0">
          <a-entity class="clickable"
            image-slider-activate="markerId: vier__marker; slides: slides4; images: [{img: '#vier__1, width: 152, height: 114, headline: 'gebäude1'}, {img: '#vier__2, width: 152, height: 114, headline: 'gebäude2'}, {img: '#vier__3, width: 152, height: 114, headline: 'gebäude3'},  {img: '#vier__4, width: 152, height: 114, headline: 'gebäude4'}]">
          </a-entity>
        </a-entity>
      </a-nft> -->


      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/005/005"
        smooth="true" smoothcount="10" smoothtolerance=".01" smooththreshold="5" raycaster="objects: .clickable"
        emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="fünf__marker">
        <a-entity scale="1 1 1" position="50 150 -200" rotation="-90 0 0">
          <a-entity class="clickable"
            image-slider-activate="markerId: fünf__marker; slides: slides5; images: [{img: '#fünf__1, width: 120, height: 80, headline: 'lobby'}, {img: '#fünf__2, width: 120, height: 80, headline: 'lobby2'}, {img: '#fünf__3, width: 80, height: 120, headline: 'lobby3'},  {img: '#fünf__4, width: 80, height: 120, headline: 'lobby4'},  {img: '#fünf__5, width: 80, height: 120, headline: 'lobby5'}]">
          </a-entity>
        </a-entity>
      </a-nft>

      <!-- <a-nft type="nft" url="https://transfer.short-cuts.cloud/paular/tracker/vier/vier" smooth="true"
        id="vidFullMarker" smoothcount="10" smoothtolerance="0.01" smooththreshold="5">
        <a-entity position="50 150 -200" videohandlerFull>

        </a-entity>
      </a-nft> -->



      <!-- KAI
    der funktioniert  -->
      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/013/image--013"
        smooth="true" id="vidMarker" smoothcount="10" smoothtolerance="0.01" smooththreshold="5">
        <a-entity position="50 150 -200" videohandler>

        </a-entity>
      </a-nft>
      <!-- KAI
    der funktioniert nicht -->
      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/010/image--010"
        smooth="true" id="vidFullMarker" smoothcount="10" smoothtolerance="0.01" smooththreshold="5">
        <a-entity position="50 150 -200" videoFullhandler>

        </a-entity>
      </a-nft>
      <!-- KAI
    der funktioniert nicht -->
      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/023/image--023"
        smooth="true" id="fullVideoMarker" smoothcount="10" smoothtolerance="0.01" smooththreshold="5">
        <a-entity position="50 150 -200" fullVideo>

        </a-entity>
      </a-nft>

      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/kala/kala"
        smooth="true" smoothCount="20" smoothTolerance=".01" smoothThreshold="10" raycaster="objects: .clickable"
        emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="modelmarker">

        <!-- 
        <a-entity light="type: directional; color: #FFF; intensity: 10" position="-0.5 1 1"></a-entity> -->

        <a-entity position="50 150 -200" objectmodel-detected>
        </a-entity>


      </a-nft>



      <!-- <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/010/image--010"
        id="yo" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
        <a-entity scale="1 1 1" position="50 150 -200" rotation="-90 0 0">
          <a-entity class="clickable"
            image-slider-activate="markerId: yo; slides: slides2;  images: [{img: '#my-image', width: 80, height: 120, headline: 'waschbecken'}, {img: '#my-image2', width: 80, height: 120, headline: 'waschbecken2'}, {img: '#my-image3', width: 80, height: 120, headline: 'waschbecken3'},  {img: '#my-image4', width: 80, height: 120, headline: 'waschbecken4'},  {img: '#my-image5', width: 80, height: 120, headline: 'waschbecken5'}]">
          </a-entity>
        </a-entity>
      </a-nft> -->

      <!-- 
      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/013/image--013"
        id="banana" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
        <a-entity scale="1 1 1" position="50 150 -200" rotation="-90 0 0">

          <a-entity class="clickable"
            image-slider-activate="markerId: banana; slides: slides3; images: [{img: '#dreizehn__1', width: 80, height: 120, headline: 'bäume1'}, {img: '#dreizehn__2', width: 120, height: 80, headline: 'bäume2'}, {img: '#dreizehn__3', width: 120, height: 80, headline: 'bäume3'},  {img: '#dreizehn__4', width: 120, height: 80, headline: 'bäume4'},  {img: '#dreizehn__5', width: 120, height: 80, headline: 'bäume5'}]">
          </a-entity>
        </a-entity>
      </a-nft> -->

      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/018/image--018"
        smooth="true" smoothcount="10" smoothtolerance=".01" smooththreshold="5" raycaster="objects: .clickable"
        emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="achtzehn__marker">
        <a-entity scale="1 1 1" position="50 150 -200" rotation="-90 0 0">

          <a-entity class="clickable"
            image-slider-activate="markerId: achtzehn__marker; slides: slides8; images: [{img: '#achtzehn__1, width: 120, height: 80, headline: 'kantine1'}, {img: '#achtzehn__2, width: 120, height: 80, headline: 'kantine2'}, {img: '#achtzehn__3, width: 120, height: 80, headline: 'kantine3'},  {img: '#achtzehn__4, width: 80, height: 120, headline: 'kantine4'},  {img: '#achtzehn__5, width: 120, height: 80, headline: 'kantine5'}, {img: '#achtzehn__6, width: 120, height: 80, headline: 'kantine6'}]">
          </a-entity>
        </a-entity>
      </a-nft>


      <!-- 
      <a-nft type="nft"
        url="https://arjs-cors-proxy.herokuapp.com/https://rawcdn.githack.com/PetabitMan/TC-flyer/master/tracker/023/image--023"
        smooth="true" smoothcount="5" smoothtolerance=".01" smooththreshold="10" raycaster="objects: .clickable"
        emitevents="true" cursor="fuse: false; rayOrigin: mouse;">

      </a-nft> -->


      <a-entity camera>
        <a-entity cursor="fuse: true; fuseTimeout: 1000" position="0 0 -1"
          geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.008" material="color: grey; shader: flat">
        </a-entity>

        <!-- 30 57 20 -->
        <a-entity position="0 0 0" rotation="0 0 20">
          <a-entity gesture-handler="minScale:0.7; maxScale:1.5; name:model" class="clickable" visible="false" id="area"
            position="0 0 -1" rotation="30 57 0" gltf-model="#area3" scale="2 2 2">
          </a-entity>
          <a-plane gesture-handler="minScale:0.7; maxScale:1.5; name:plane;" class="clickable" width="0.5" height="0.5"
            opacity="0.9" position="0 0 -1" id="plane" rotation="-60 57 0" color="white" visible="false">

          </a-plane>
        </a-entity>



        <a-image position="0 0 -1" width="0.00000012" height="0.00000006" src="#my-image" id="image-slider">
        </a-image>


    </a-scene>
  </div>
  <script>

    const next__button = document.getElementById("btn__nextimage");
    const back__button = document.getElementById("btn__lastimage");
    const slider = document.getElementById("image-slider");


    next__button.addEventListener("click", () => {

      let slideindex = slides.indexOf(slider.getAttribute("src"));
      // If it switches to another slider
      if (!slideindex) {
        slideindex = 0
      }
      if (slides.length - 1 === slideindex) {
        slider.setAttribute("src", slides[0]);
      } else {
        slider.setAttribute("src", slides[(slideindex += 1)]);
      }

    });
    back__button.addEventListener("click", () => {
      let slideindex = slides.indexOf(slider.getAttribute("src"));
      // If it switches to another slider
      if (!slideindex) {
        slideindex = 0
      }
      if (slideindex === 0) {
        slider.setAttribute("src", slides[slides.length - 1]);
      } else {
        slider.setAttribute("src", slides[(slideindex -= 1)]);
      }
    });
  </script>

</body>

</html>